<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Honoua ‚Äì Suivi CO‚ÇÇ</title>
  <!-- M√™me CSS que EcoSelect / ScanImpact -->
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
 <link rel="icon" href="/favicon.ico" sizes="any">

</head>

<body class="suivico2-page ecoselect-page">
  <!-- CONTENU PRINCIPAL SUIVI CO‚ÇÇ -->
  <main class="suivico2-main ecoselect-main">

       <!-- NAVIGATION INTERNE (Suivi CO‚ÇÇ) -->
    <nav id="suivi-co2-nav" class="suivi-co2-nav card">
      <a class="suivi-co2-nav__link" href="#suivi-budget">Budget</a>
      <a class="suivi-co2-nav__link" href="#suivi-evolution">√âvolution</a>
      <a class="suivi-co2-nav__link" href="#co2-cart-history-section">Historique</a>
      <a class="suivi-co2-nav__link" href="#co2-challenges-section">D√©fis perso</a>
      <a class="suivi-co2-nav__link" href="#co2-challenges-collective-section">D√©fis collectifs</a>
    </nav>



    <!-- BLOC 1 ‚Äì Budget carbone annuel -->
    <section id="suivi-budget" class="card suivi-budget">
      <div class="suivi-budget-header">
        <h2>Budget carbone annuel</h2>
        <p class="suivi-budget-sub">
          Objectif GIEC : 2&nbsp;t CO‚ÇÇ / personne / an. Le budget repart au 1er janvier.
        </p>
      </div>

      <div class="suivi-budget-body">
        <!-- Param√©trage du foyer -->
        <div class="suivi-household">
          <label for="household-size-input" class="suivi-household__label">
            Nombre de personne(s) dans le foyer
          </label>

          <div class="suivi-household__controls">
            <input
              id="household-size-input"
              class="suivi-household__input"
              type="number"
              min="1"
              max="10"
              step="1"
              inputmode="numeric"
              placeholder="ex : 1"
            />
            <button
              type="button"
              id="household-size-save"
              class="suivi-household__btn">
              Mettre √† jour
            </button>
          </div>
        </div>

        <div class="suivi-budget-line">
          <span class="label">Budget annuel du foyer</span>
          <span id="budget-total" class="value">‚Äî kg</span>
        </div>

        <div class="suivi-budget-line">
          <span class="label">CO‚ÇÇ consomm√© (depuis le 1er janvier)</span>
          <span id="co2-consomme" class="value">‚Äî kg</span>
        </div>

        <div class="suivi-budget-line">
          <span class="label">Budget utilis√©</span>
          <span id="budget-used" class="value">‚Äî %</span>
        </div>

        <div class="suivi-budget-line">
          <span class="label">Budget restant</span>
          <span id="budget-left" class="value">‚Äî kg (‚Äî %)</span>
        </div>

        <div class="suivi-budget-progress">
          <div id="budget-progress-bar" class="progress-bar"></div>
        </div>

        <div id="budget-status" class="suivi-budget-status status-green">
          <!-- Texte de statut ins√©r√© en JS -->
        </div>
      </div>
    </section>

    <!-- BLOC 2 ‚Äì √âvolution dans le temps -->
    <section id="suivi-evolution" class="card suivi-evolution">
      <div class="suivi-evolution-header">
        <h2>√âvolution de mes √©missions</h2>
        <p class="suivi-evolution-sub">
          Visualisez vos √©missions et distances par p√©riode.
        </p>

        <div class="suivi-evolution-period-toggle">
          <button
            type="button"
            id="evo-period-month"
            class="evo-period-btn evo-period-btn-active">
            Mois
          </button>
          <button
            type="button"
            id="evo-period-week"
            class="evo-period-btn">
            Semaines
          </button>
        </div>

        <div class="suivi-evolution-metric-toggle">
          <button type="button" id="evo-metric-co2" class="evo-metric-btn evo-metric-btn-active">CO‚ÇÇ (kg)</button>
          <button type="button" id="evo-metric-distance" class="evo-metric-btn">Distance (km)</button>
        </div>

        <p class="suivi-evolution-legend" id="evo-legend">
          Graphique : CO‚ÇÇ (kg) par p√©riode
        </p>



      </div>

      <div class="suivi-evolution-body">
        <div class="suivi-evolution-chart">
          <canvas id="evo-chart" width="320" height="180">
            Votre navigateur ne supporte pas l‚Äôaffichage du graphique.
          </canvas>
        </div>

        <div class="suivi-evolution-summary">
          <div class="summary-line">
            <span class="label">P√©riode actuelle</span>
            <span id="evo-current-period" class="value">‚Äî</span>
          </div>

          <div class="summary-line">
            <span class="label">CO‚ÇÇ de la p√©riode</span>
            <span id="evo-current-co2" class="value">‚Äî kg</span>
          </div>

          <div class="summary-line">
            <span class="label">Distance totale</span>
            <span id="evo-current-distance" class="value">‚Äî km</span>
          </div>

          <div class="summary-line">
            <span class="label">√âvolution CO‚ÇÇ vs p√©riode pr√©c√©dente</span>
            <span id="evo-co2-change" class="value">‚Äî %</span>
          </div>

          <div class="summary-line">
            <span class="label">√âvolution distance vs p√©riode pr√©c√©dente</span>
            <span id="evo-distance-change" class="value">‚Äî %</span>
          </div>
        </div>
      </div>
    </section>

    <!-- BLOC 3 ‚Äì Historique des paniers -->
    <section id="co2-cart-history-section" class="card co2-cart-history">
      <div class="header">
        <div class="title-block">
          <h2 class="title">Historique de vos paniers CO‚ÇÇ</h2>
          <p class="subtitle">
            Retrouvez vos derniers paniers valid√©s et leur impact carbone.
          </p>
        </div>
      </div>

      <div id="co2-cart-history-list" class="co2-cart-history-list">
         <p class="co2-cart-history-empty">
    Chargement de votre historique...
        </p>
      </div>

      <div id="co2-cart-history-detail" class="co2-cart-history-detail hidden"></div>
    </section>

    <!-- BLOC 4 ‚Äì D√©fis CO‚ÇÇ -->
    <section id="co2-challenges-section" class="co2-challenges-section card">
    

      <button id="co2-challenges-refresh" class="co2-challenges-refresh-btn">
        üîÑ Mettre √† jour les d√©fis
      </button>
      <h2 class="co2-challenges-title">üèÜ D√©fis personnels</h2>

      <div id="co2-challenges-list" class="co2-challenges-list">
        <div class="co2-challenge-empty">
          Aucun d√©fi actif pour le moment. Active ton premier d√©fi pour suivre ta progression.
        </div>
      </div>
    </section>

        <!-- BLOC 5 ‚Äì D√©fis collectifs (EN CONSTRUCTION) -->
    <section id="co2-challenges-collective-section" class="co2-challenges-section card">
      <div class="header">
        <div class="title-block">
          <h2 class="co2-challenges-title">ü§ù D√©fis collectifs</h2>
          <p class="subtitle">
            D√©fis en groupe (entre amis, entreprise, communaut√©). Cette partie arrive bient√¥t.
          </p>
        </div>
      </div>

      <div id="co2-challenges-collective" class="co2-challenges-list">
        <div id="co2-challenges-collective-status" class="co2-challenge-empty">
          üöß En construction ‚Äî Les d√©fis collectifs seront disponibles dans une prochaine version.
        </div>
      </div>
    </section>


  </main>

  <!-- FOOTER / MENU PRINCIPAL -->
  <footer class="honoua-footer-nav">
    <button class="honoua-footer-nav__item" data-page="home">
      <span class="honoua-footer-nav__icon">üè†</span>
      <span class="honoua-footer-nav__label">Accueil</span>
    </button>

    <button class="honoua-footer-nav__item" data-page="eco">
      <span class="honoua-footer-nav__icon">‚õ∂</span>
      <span class="honoua-footer-nav__label">EcoSelect</span>
    </button>

    <button class="honoua-footer-nav__item" data-page="scan">
      <span class="honoua-footer-nav__icon">üõí</span>
      <span class="honoua-footer-nav__label">ScanImpact</span>
    </button>

    <button class="honoua-footer-nav__item is-active" data-page="suivi">
      <span class="honoua-footer-nav__icon">üìä</span>
      <span class="honoua-footer-nav__label">Suivi CO‚ÇÇ</span>
    </button>
  </footer>


  <script src="js/honoua-core.js" charset="utf-8"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof setupCo2ChallengesMvp === 'function') {
      console.log('[D√©fis] init suivi-co2');
      setupCo2ChallengesMvp();
    } else {
      console.warn('[D√©fis] setupCo2ChallengesMvp introuvable (honoua-core.js non charg√© ?)');
    }
  });
</script>

  <script src="js/suivi-co2.js" charset="utf-8"></script>
  <script src="js/nav.js" charset="utf-8"></script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (!window.__honouaChallengesInitDone && typeof window.setupCo2ChallengesMvp === 'function') {
      window.__honouaChallengesInitDone = true;
      window.setupCo2ChallengesMvp();
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const list = document.getElementById('co2-challenges-list');
    if (!list) return;

    if (typeof window.setupCo2ChallengesMvp === 'function') {
      window.setupCo2ChallengesMvp();
    }
  });
</script>

</body>
</html>
